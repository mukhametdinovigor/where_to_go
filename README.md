# Куда пойти — Москва глазами Артёма

Cайт о самых интересных местах в Москве. Авторский проект Артёма. На карте отображается маркеры с названием места, 
кликнув по одному из них, в окне справа можно получить информацию по этому месту: название, короткое описание, полное описание,
посмотреть фотографии.

[Демо сайта](http://mukhametdinovigor.pythonanywhere.com).

## Как запустить

Для запуска сайта вам понадобится Python третьей версии.

Скачайте код с GitHub. Установите зависимости:

```bash
pip install -r requirements.txt
```

Создайте базу данных SQLite

```bash
python3 manage.py migrate
```

Запустите разработческий сервер

```bash
python3 manage.py runserver
```

Перейдите по адресу, чтобы открыть локальную версию сайта

`http://127.0.0.1:8000/`

## Переменные окружения

Часть настроек проекта берётся из переменных окружения. Чтобы их определить, создайте файл `.env` рядом с `manage.py` и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступны 3 переменные:
- `DEBUG` — дебаг-режим. Поставьте `True`, чтобы увидеть отладочную информацию в случае ошибки.
- `SECRET_KEY` — секретный ключ проекта
- `DATABASE_FILEPATH` — полный путь к файлу базы данных SQLite, например: `/home/user/schoolbase.sqlite3`
- `ALLOWED_HOSTS` — см [документацию Django](https://docs.djangoproject.com/en/3.1/ref/settings/#allowed-hosts)

## Наполнение данными

Данные для сайта заливаются через админку. Создать запись администратора

```bash
python3 manage.py createsuperuser
```

Перейти в админку и указать логин и пароль, которые были созданы при создании superuser

`http://127.0.0.1:8000/admin`

Чтобы создать локацию, в админке необходимо заполнить все поля и добавить фотографии. После этого на карте будет
отображаться маркер. Кликнув по нему, можно будет увидеть всю информацию, которая была внесена в админку.
Порядок фотографий в админке можно менять путём перетаскивания мышью.

Также данные можно залить с помощью консольной команды `load_place`

```bash
python manage.py load_place http://адрес/файла.json
```
Файл json должен выглядеть так:

```json
{
    "title": "Генератор Маркса или «Катушка Тесла»",
    "imgs": [
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/d3b5cc74cc94c802b51c85542b2f9ad5.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/b742b82f77028d6a8c9be681cab25a3d.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/57f990fd24a55324fc1fc541cac41b99.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/2d5be0d4e83fdde3e8c98f18e0d2e365.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/d4a8ab43eff1f7e83491610682d13984.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/7945e1e565530ab6943c40d64f21cfb7.jpg"
    ],
    "description_short": "Место, в котором рождаются искусственные молнии и облака.",
    "description_long": "<p>Внешний вид этого монстроподобного, внушительного комплекса заставляет сердца посетителей биться чаще, а некоторое сходство с катушкой Тесла (на самом деле это генератор Аркадьева-Маркса) влечёт сюда всех любителей научпопа, индастриала и других интересующихся. Для того, чтобы попасть на территорию действующего испытательного стенда ВНИЦ ВЭИ, коим и является это окутанное мифами место, рекомендуется договориться с охраной. Несанкционированное попадание в пределы испытаний может повлечь самые серьёзные последствия!</p>",
    "coordinates": {
        "lng": "36.88324860715219",
        "lat": "55.92555463090268"
    }
}
```

Тестовые данные можно взять [здесь](https://github.com/devmanorg/where-to-go-places) 

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).

Тестовые данные взяты с сайта [KudaGo](https://kudago.com).

